<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Creating Arrow Objects | Arrow Cookbook</title>
  <meta name="description" content="3 Creating Arrow Objects | Arrow Cookbook" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Creating Arrow Objects | Arrow Cookbook" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Creating Arrow Objects | Arrow Cookbook" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="reading-and-writing-data.html"/>
<link rel="next" href="manipulating-data.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<link href="libs/testrmd-0.0.1.9000/testrmd.css" rel="stylesheet" />


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preface</a></li>
<li class="chapter" data-level="2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html"><i class="fa fa-check"></i><b>2</b> Reading and Writing Data</a><ul>
<li class="chapter" data-level="2.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#reading-and-writing-parquet-files"><i class="fa fa-check"></i><b>2.1</b> Reading and Writing Parquet Files</a><ul>
<li class="chapter" data-level="2.1.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#writing-a-parquet-file"><i class="fa fa-check"></i><b>2.1.1</b> Writing a Parquet file</a></li>
<li class="chapter" data-level="2.1.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#reading-a-parquet-file"><i class="fa fa-check"></i><b>2.1.2</b> Reading a Parquet file</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#how-to-read-a-partitioned-parquet-file-from-s3"><i class="fa fa-check"></i><b>2.2</b> How to read a (partitioned) Parquet file from S3</a></li>
<li class="chapter" data-level="2.3" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#how-to-filter-rows-or-columns-while-reading-a-parquet-file"><i class="fa fa-check"></i><b>2.3</b> How to filter rows or columns while reading a Parquet file</a></li>
<li class="chapter" data-level="2.4" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#reading-and-writing-csv-files"><i class="fa fa-check"></i><b>2.4</b> Reading and Writing CSV files</a></li>
<li class="chapter" data-level="2.5" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#reading-and-writing-partitioned-data"><i class="fa fa-check"></i><b>2.5</b> Reading and Writing Partitioned Data</a><ul>
<li class="chapter" data-level="2.5.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#writing-partitioned-data"><i class="fa fa-check"></i><b>2.5.1</b> Writing Partitioned Data</a></li>
<li class="chapter" data-level="2.5.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#reading-partitioned-data"><i class="fa fa-check"></i><b>2.5.2</b> Reading Partitioned Data</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#reading-and-writing-feather-files"><i class="fa fa-check"></i><b>2.6</b> Reading and Writing Feather files</a><ul>
<li class="chapter" data-level="2.6.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#write-an-ipcfeather-v2-file"><i class="fa fa-check"></i><b>2.6.1</b> Write an IPC/Feather V2 file</a></li>
<li class="chapter" data-level="2.6.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#write-a-feather-version-1-file"><i class="fa fa-check"></i><b>2.6.2</b> Write a Feather (version 1) file</a></li>
<li class="chapter" data-level="2.6.3" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#read-a-feather-file"><i class="fa fa-check"></i><b>2.6.3</b> Read a Feather file</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#reading-and-writing-streaming-ipc-files"><i class="fa fa-check"></i><b>2.7</b> Reading and Writing Streaming IPC Files</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="creating-arrow-objects.html"><a href="creating-arrow-objects.html"><i class="fa fa-check"></i><b>3</b> Creating Arrow Objects</a><ul>
<li class="chapter" data-level="3.1" data-path="creating-arrow-objects.html"><a href="creating-arrow-objects.html#build-an-arrow-table-from-native-language-types"><i class="fa fa-check"></i><b>3.1</b> Build an Arrow Table from native language types</a><ul>
<li class="chapter" data-level="3.1.1" data-path="creating-arrow-objects.html"><a href="creating-arrow-objects.html#manually-create-a-table-from-an-r-object"><i class="fa fa-check"></i><b>3.1.1</b> Manually create a table from an R object</a></li>
<li class="chapter" data-level="3.1.2" data-path="creating-arrow-objects.html"><a href="creating-arrow-objects.html#manually-create-a-recordbatch"><i class="fa fa-check"></i><b>3.1.2</b> Manually create a RecordBatch</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="creating-arrow-objects.html"><a href="creating-arrow-objects.html#storing-categorical-data-in-arrow"><i class="fa fa-check"></i><b>3.2</b> Storing Categorical Data in Arrow</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="manipulating-data.html"><a href="manipulating-data.html"><i class="fa fa-check"></i><b>4</b> Manipulating Data</a><ul>
<li class="chapter" data-level="4.1" data-path="manipulating-data.html"><a href="manipulating-data.html#computing-meanminmax-etc-value-of-an-array"><i class="fa fa-check"></i><b>4.1</b> Computing Mean/Min/Max, etc value of an array</a></li>
<li class="chapter" data-level="4.2" data-path="manipulating-data.html"><a href="manipulating-data.html#counting-occurrences-of-elements-in-an-array"><i class="fa fa-check"></i><b>4.2</b> Counting occurrences of elements in an array</a></li>
<li class="chapter" data-level="4.3" data-path="manipulating-data.html"><a href="manipulating-data.html#applying-arithmetic-functions-to-arrays."><i class="fa fa-check"></i><b>4.3</b> Applying arithmetic functions to arrays.</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Arrow Cookbook</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="creating-arrow-objects" class="section level1">
<h1><span class="header-section-number">3</span> Creating Arrow Objects</h1>
<div id="build-an-arrow-table-from-native-language-types" class="section level2">
<h2><span class="header-section-number">3.1</span> Build an Arrow Table from native language types</h2>
<div id="manually-create-a-table-from-an-r-object" class="section level3">
<h3><span class="header-section-number">3.1.1</span> Manually create a table from an R object</h3>
<p>You may want to convert an existing data frame in R to an Arrow Table object.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="creating-arrow-objects.html#cb30-1"></a><span class="co"># Create an example data frame</span></span>
<span id="cb30-2"><a href="creating-arrow-objects.html#cb30-2"></a>my_tibble &lt;-<span class="st"> </span>tibble<span class="op">::</span><span class="kw">tibble</span>(<span class="dt">group =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>), <span class="dt">score =</span> <span class="kw">c</span>(<span class="dv">99</span>, <span class="dv">97</span>, <span class="dv">99</span>))</span>
<span id="cb30-3"><a href="creating-arrow-objects.html#cb30-3"></a><span class="co"># Convert to Arrow Table</span></span>
<span id="cb30-4"><a href="creating-arrow-objects.html#cb30-4"></a>my_table &lt;-<span class="st"> </span>Table<span class="op">$</span><span class="kw">create</span>(my_tibble)</span>
<span id="cb30-5"><a href="creating-arrow-objects.html#cb30-5"></a><span class="co"># View table</span></span>
<span id="cb30-6"><a href="creating-arrow-objects.html#cb30-6"></a>my_table</span></code></pre></div>
<pre><code>## Table
## 3 rows x 2 columns
## $group &lt;string&gt;
## $score &lt;double&gt;</code></pre>
<div id="view-the-contents-of-an-arrow-table" class="section level4">
<h4><span class="header-section-number">3.1.1.1</span> View the contents of an Arrow Table</h4>
<p>You can view the contents of an Arrow table using <code>dplyr::collect()</code></p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="creating-arrow-objects.html#cb32-1"></a><span class="co"># View Table</span></span>
<span id="cb32-2"><a href="creating-arrow-objects.html#cb32-2"></a>dplyr<span class="op">::</span><span class="kw">collect</span>(my_table)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   group score
##   &lt;chr&gt; &lt;dbl&gt;
## 1 A        99
## 2 B        97
## 3 C        99</code></pre>
</div>
</div>
<div id="manually-create-a-recordbatch" class="section level3">
<h3><span class="header-section-number">3.1.2</span> Manually create a RecordBatch</h3>
<p>You may want to convert an existing data frame in R to an Arrow Record Batch object.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="creating-arrow-objects.html#cb34-1"></a><span class="co"># Create an example data frame</span></span>
<span id="cb34-2"><a href="creating-arrow-objects.html#cb34-2"></a>my_tibble &lt;-<span class="st"> </span>tibble<span class="op">::</span><span class="kw">tibble</span>(<span class="dt">group =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>), <span class="dt">score =</span> <span class="kw">c</span>(<span class="dv">99</span>, <span class="dv">97</span>, <span class="dv">99</span>))</span>
<span id="cb34-3"><a href="creating-arrow-objects.html#cb34-3"></a><span class="co"># Convert to Arrow RecordBatch</span></span>
<span id="cb34-4"><a href="creating-arrow-objects.html#cb34-4"></a>my_record_batch &lt;-<span class="st"> </span><span class="kw">record_batch</span>(my_tibble)</span>
<span id="cb34-5"><a href="creating-arrow-objects.html#cb34-5"></a><span class="co"># View RecordBatch</span></span>
<span id="cb34-6"><a href="creating-arrow-objects.html#cb34-6"></a>my_record_batch</span></code></pre></div>
<pre><code>## RecordBatch
## 3 rows x 2 columns
## $group &lt;string&gt;
## $score &lt;double&gt;</code></pre>
<div id="view-the-contents-of-a-recordbatch" class="section level4">
<h4><span class="header-section-number">3.1.2.1</span> View the contents of a RecordBatch</h4>
<p>You can view the contents of a RecordBatch using <code>dplyr::collect()</code></p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="creating-arrow-objects.html#cb36-1"></a><span class="co"># View RecordBatch</span></span>
<span id="cb36-2"><a href="creating-arrow-objects.html#cb36-2"></a>dplyr<span class="op">::</span><span class="kw">collect</span>(my_record_batch)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   group score
##   &lt;chr&gt; &lt;dbl&gt;
## 1 A        99
## 2 B        97
## 3 C        99</code></pre>
</div>
</div>
</div>
<div id="storing-categorical-data-in-arrow" class="section level2">
<h2><span class="header-section-number">3.2</span> Storing Categorical Data in Arrow</h2>
<p>An Arrow Dictionary object is similar to a factor in R, in that it allows for efficient storage of categorical data by allowing you to map between indices and values, reducing the amount of storage. If you have an R data frame containing factors, converting it to an Arrow object will automatically encode that column as a dictionary.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="creating-arrow-objects.html#cb38-1"></a><span class="kw">class</span>(iris<span class="op">$</span>Species)</span></code></pre></div>
<pre><code>## [1] &quot;factor&quot;</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="creating-arrow-objects.html#cb40-1"></a>iris_rb &lt;-<span class="st"> </span><span class="kw">record_batch</span>(iris)</span>
<span id="cb40-2"><a href="creating-arrow-objects.html#cb40-2"></a>iris_rb</span></code></pre></div>
<pre><code>## RecordBatch
## 150 rows x 5 columns
## $Sepal.Length &lt;double&gt;
## $Sepal.Width &lt;double&gt;
## $Petal.Length &lt;double&gt;
## $Petal.Width &lt;double&gt;
## $Species &lt;dictionary&lt;values=string, indices=int8&gt;&gt;
## 
## See $metadata for additional Schema metadata</code></pre>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="reading-and-writing-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="manipulating-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ursacomputing/arrow-cookbook/edit/master/r/content/initial_recipes.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
